# Генератор дымовых тестов


## Основные настройки

**Каталог файлов исключений** - каталог, в котором хранятся текстовые файлы (*.txt) со списком объектов, которые будут исключены из тестирования. Имена и количество файлов произвольные однако имя файла должно начинаться  с типа объекта метаданных.
```
Справочники.txt 
Документы.txt
ПланыВидовХарактеристик.txt
ПланыСчетов.txt
ПланыВидовРасчета.txt
ЖурналыДокументов.txt
Отчеты.txt
Обработки.txt
РегистрыСведений.txt
РегистрыНакопления.txt
РегистрыБухгалтерии.txt
РегистрыРасчета.txt
```

Каждая строчка в файле - один исключаемый объект. 
пустые строки и строки которые начинаются с // (двух слешей) пропускаются

Формат строки:

**[ИмяОбъектаМетаданных].[ТипТеста].[Уточнение]**

**[ИмяОбъектаМетаданных]** - имя объекта конфигурации, как оно задано в конфигураторе
**[ТипТеста]**- тип теста, который требуется исключить, возможны варианты:
   - **ФормаСписка** - исключить открытие формы списка
   - **ФормаОбъекта** - исключить открытие формы объекта
   - **Запись** - исключить запись существующего элемента
   - **Копирование** - исключить копирование существующего элемента
   - **ВводНаОсновании** - исключить ввод на основании существующего элемента
   - **Печать** - исключить проверку печатных форм

**[Уточнение]** - уточнение по типу теста, например:
   - [ТипТеста] = Запись
	это **группа или элемент справочника**. 
	Если не указан, то и группа и элемент.
   - [ТипТеста]  = ВводНаОсновании
	это **тип документа**, который необходимо исключить из ввода на основании. 
	Если не указан, то все типы.
   - [ТипТеста]  = Печать
	это **имя печатной формы**, которую необходимо исключить из проверки. 
	Если не указан, то все печатные формы.

Примеры:


   - **ТранспортноеСообщение**
       Полностью исключить из тестов объект с именем "ТранспортноеСообщение"
   - **ВерсииРасширений.Запись**
       Исключить из тестов запись объекта с именем "ВерсииРасширений"
   - **ГруппыДоступа.Запись.Группа**
       Исключить из тестов запись группы справочника с именем "ГруппыДоступа"
   - **ТребованиеНакладная.ВводНаОсновании**
       Исключить из тестов ввод объектов на основании документа с именем "ТребованиеНакладная"
   - **АвансовыйОтчет.ВводНаОсновании.СчетФактураПолученный**
       Исключить из тестов ввод объекта с именем "СчетФактураПолученный" на основании документа с именем "АвансовыйОтчет"
   - **СчетФактураВыданный.Копирование**
       Исключить из тестов копирование объекта с именем "СчетФактураВыданный"
   - **ПередачаОС.Печать**
       Исключить из тестов печать из объекта с именем "ПередачаОС"
   - **ПередачаОС.Печать.УниверсальныйПередаточныйДокумент**
       Исключить из тестов печать печатной формы "УниверсальныйПередаточныйДокумент" из объекта с именем "ПередачаОС"

**Путь настройки файлов дымовых тестов** - указывается путь к файлу в котором указаны виды дымовых тестов которые нужно сформировать.

## Пакетное формирование фича-файлов

В форме "Генератор дымовых тестов":
   1. На закладке "Основные настройки" указать флажками нужные тесты 
   2. Перейти на закладку "Пакетное формирование фича-файлов"
   3. Отметить для выгрузки необходимые типы объектов метаданных и проставить признаки действий
   4. Нажать "Сформировать файлы"

В результате будут сформированы фича-файлы дымовых тестов в каталоге "Путь настройки файлов дымовых тестов".
   

## Формирование сценариев по метаданным

В форме "Генератор дымовых тестов":
   1. На закладке "Основные настройки" указать флажками нужные тесты 
   2. Перейти на закладку "Пакетное формирование фича-файлов"
   3. Нажать на команду "Обновить структуру метаданных", для формирование дерева метаданных в резрезе `Тип метаданного/Объект метаданного`
   4. Отметить для выгрузки необходимые объекты метаданных и проставить признаки действий
   5. Заполнить "Каталог feature-файлов" (если ранее не был заполнен в п.1)
   6. Нажать "Сформировать сценарии по метаданным"
   7. Скорректировать, если необходимо набор сформированных сценариев (открыва каждый необходимый готовый сценарий)
   8. Нажать "Создать/обновить feature-файлы", для создания новых или обновления ранее сгенерированных фича-файлов

![Alt text](./pic/GenSmoke.png)

Команда "Подготовка данных" необходима для возможности открытия формы "Подготова и загрузка данных", для быстрой генерации данных, в случае если в базе для которой подготавливаются дымовые тесты еще нет тестовых данных для расширенных действий (Запись, Копирование, Печать). Сгенерированные в результате сценарии подготовки данных, можно использовать для фича-файлов дымовых тестов.
