##### [Ссылка на видео](https://youtu.be/zPLez7v8AnA)

001. Привет! В этом уроке я расскажу тебе про то как понять что пошло не так при запуске тестов в CI контуре. Давай откроем второй экземпляр Ванессы в режиме обучения.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/000_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

002. Бывают ситуации когда тест упал при запуске в CI контуре, но локально проходит без ошибок.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/001_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

003. Для того чтобы понять почему так происходит можно применить следующую методику.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/002_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

004. Сначала нужно настроить, чтобы при возникновении ошибки в CI контуре происходило сохранение состояния активной формы в файл.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/007_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

005. Далее этот файл можно будет получить, например, из отчета Allure как показано на скриншоте.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/008_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

006. После этого тест нужно выполнить локально. При этом нужно поставить точку останова на том же шаге, на котором тест упал в CI контуре.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/009_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

007. После этого надо сохранить состояние формы клиента тестирования, полученное при локальном запуске в файл с помощью этой команды.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/016_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

008. После этого можно сделать сравнение этих файлов с помощью встроенного в платформу 1С механизма сравнения файлов.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/030_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

009. В этом окне нужно указать два ранее полученных файла состояния формы и найти расхождения.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/031_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

010. Так можно определить что именно пошло не так при запуске теста.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/032_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

011. Файлы состояний всех форм можно сравнивать аналогично.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/033_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

012. На этом всё, переходи к следующему уроку интерактивной справки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.041.1/MD/Глава08/images/035_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)
