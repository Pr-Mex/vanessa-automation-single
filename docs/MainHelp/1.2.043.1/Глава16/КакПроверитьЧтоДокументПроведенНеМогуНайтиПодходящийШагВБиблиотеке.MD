##### [Ссылка на видео](https://vkvideo.ru/video-235354700_456239378)

001. Привет! Данный урок создан по материалам канала "QA в 1С". Автор Александр Кунташов.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00004_63902998644205_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

002. Александр привет. Скажи, пожалуйста - как проверить по номеру документа, что он проведен. Не могу найти подходящий шаг в библиотеке.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00005_63902998644345_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

003. Привет. Готового шага, который бы мог проверить состояние проведения документа по номеру в библиотеке Vanessa Automation нет.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00010_63902998645952_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

004. Из готовых шагов максимально близко к тому, чтобы реализовать нужное поведение, это шаги из расширения - VAExtension.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00020_63902998655054_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

005. Оба шага считывают состояние объекта в автоматически создаваемые переменные, среди которых есть переменная с именем - Проведен.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00027_63902998660816_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

006. Она может принимать значения истина или ложь, в зависимости от того, проведен документ или нет.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00034_63902998666798_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

007. У меня как раз под рукой есть готовый пример

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00040_63902998674732_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

008. Сначала нам надо найти документ по номеру. Это можно сделать так.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00043_63902998676215_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

009. Затем надо получить его состояние. При этом будут созданы переменные, в которые будут записаны данные о состоянии документа.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00048_63902998681671_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

010. И затем надо вызвать исключение, если документ не проведен

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00053_63902998686237_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

011. Такой способ работает также в том случае, когда менеджер и клиент тестирования находятся в разных базах.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00060_63902998692150_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

012. Но выглядит, честно говоря, громоздко, и как минимум эти шаги надо спрятать в группу или еще лучше вынести в экспортный сценарий.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00067_63902998697997_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

013. Если же задача не разовая, то стоит рассмотреть возможность написать свой собственный шаг.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00074_63902998703742_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

014. У нас на одном небольшом внутреннем проекте менеджер и клиент запускаются в одной базе.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00081_63902998709589_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

015. И там мы для решения подобной задачи реализовали более универсальный и компактный экспортный сценарий, использующий шаги, которые выполняются в контексте менеджера тестирования.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00090_63902998718742_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

016. Далее, когда нам понадобится проверка, нужно вызвать этот подсценарий

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00099_63902998727846_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)

017. Александр, спасибо! На этом всё, переходи к следующему уроку интерактивной справки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00102_63902998731970_КакПроверитьЧтоДокументПроведенНеМогуНайтиПодходящийШагВБиблиотеке.png)
