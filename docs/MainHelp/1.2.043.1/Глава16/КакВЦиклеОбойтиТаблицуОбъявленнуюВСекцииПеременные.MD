##### [Ссылка на видео](https://vkvideo.ru/video-235354700_456239380)

001. Привет! Данный урок создан по материалам канала "QA в 1С". Автор Александр Кунташов.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00004_63904010454360_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

002. Александр привет. Я использую таблицу геркин, объявленную в секции Переменные.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00005_63904010454485_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

003. Мне надо перебрать ее строки в цикле.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00006_63904010454579_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

004. Обычно для таблиц геркин я использую такой цикл

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00013_63904010460036_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

005. Но с таблицей из секции "Переменные" этот шаг почему-то не работает

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00016_63904010464284_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

006. Могу ли я как-то в цикле перебрать строки этой таблицы?

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00017_63904010464511_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

007. Привет. Таблица, объявленная в секции "Переменные" — это не то же самое, что "таблица геркин", хотя выглядит похоже.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00022_63904010466395_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

008. Под капотом Vanessa Automation они организованы по-разному, поэтому и работать с ними приходится по-разному.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00029_63904010472167_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

009. Если коротко, то для итерирования по строкам таблицы, объявленной в секции "Переменные", нужно использовать конкретный шаг И для каждой строки таблицы "МояТаблица" я выполняю.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00038_63904010481450_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

010. И как описано в справке по этому шагу, на каждой итерации цикла в контексте сценария будут создаваться переменные.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00045_63904010487312_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

011. Имена переменных будут равны именам колонок таблицы, а значения этих переменных - значениям текущей строки соответствующих колонок.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00052_63904010493067_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

012. На этом можно было бы и закончить, но я попробую объяснить и обратить внимание на важные особенности таблиц в TurboGherkin.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00059_63904010498914_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

013. Понимание этих особенностей поможет работать с таблицами правильно.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00066_63904010504655_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

014. Таблица геркин, которая создается в самом сценарии — это не то же самое, что таблица, созданная в секции "Переменные".

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00073_63904010510403_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

015. Далее я таблицу геркин, объявленную в сценарии буду называть «обычной», а таблицу, объявленную в секции "Переменные" — "таблицей переменных"

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00080_63904010516054_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

016. Я бы предпочел называть ее «именованной таблицей переменных», но это слишком длинно.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00087_63904010521732_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

017. Далее станет понятно почему именно "таблица переменных".

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00094_63904010527571_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

018. Оба вида таблиц в ТурбоГеркин — это не ТаблицаЗначений из языка 1С!

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00101_63904010533431_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

019. Тестировщики с опытом разработки на встроенном языке 1С, часто ассоциируют таблицу геркин с объектом-коллекцией ТаблицаЗначений.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00108_63904010539208_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

020. Но на самом деле под капотом это не она.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00115_63904010544863_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

021. И более того, оба вида таблиц реализованы в текущей версии Vanessa Automation по-разному, и это главная причина, почему с ними приходится работать по-разному.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00122_63904010550785_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

022. Обычная таблица геркин под капотом представляется в виде объекта Массив.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00129_63904010556461_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

023. То есть это индексированная коллекция, к элементам которой можно обращаться по индексу (от нуля - до количества строк минус один).

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00136_63904010562315_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

024. Элементами этой коллекции являются объекты с типом Структура, каждая структура содержит данные одной строки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00143_63904010568301_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

025. Значения ячеек которой хранятся в виде пары "КолN" - "Значение энной колонки", где N - порядковый номер колонки таблицы:

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00150_63904010574185_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

026. Данный пример иллюстрирует как работает этот механизм

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00159_63904010583712_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

027. Таблица переменных в свою очередь — это Структура.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00166_63904010589601_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

028. В ней строки проиндексированы не числами, а ключами, в качестве которых используются значения самой первой колонки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00173_63904010594591_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

029. Благодаря этому вы можете получить данные строки, обратившись к конкретной строке по имени, "разыменовывая" через точку

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00180_63904010600487_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

030. Поэтому я и называю этот вид таблиц "таблицей переменных". Сравните с предыдущим примером

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00189_63904010609856_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

031. Значения первой колонки и первой строки таблицы переменных — идентификаторы.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00196_63904010615657_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

032. В отличие от обычной таблицы, у таблицы переменных есть жесткое требование к значениям ячеек первой строки и ячеек первой колонки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00203_63904010620643_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

033. Они должны быть правильными ключами Структуры и к ним предъявляются такие же требования, как к именам переменных во встроенном языке 1С.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00210_63904010626500_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

034. Они должны состоять только из букв, цифр и символа подчеркивания. И должны начинаться только с буквы или символа подчеркивания.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00217_63904010632345_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

035. В предыдущих примерах таблицы переменных были правильные.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00223_63904010640358_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

036. А вот попытка объявить таблицу в секции Переменные вот так, как в этом примере - приведет к ошибке: Задано неправильное имя атрибута структуры:

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00226_63904010641884_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

037. Потому что тут идентификатор создан не правильно.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00231_63904010647541_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

038. Спасибо, что дослушали до этого места. Надеюсь эти моменты стали понятнее.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00238_63904010652536_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)

039. Александр, спасибо! На этом всё, переходи к следующему уроку интерактивной справки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава16/images/00241_63904010656675_КакВЦиклеОбойтиТаблицуОбъявленнуюВСекцииПеременные.png)
