##### [Ссылка на видео](https://vkvideo.ru/video-235354700_456239346)

001. Привет! В этом уроке я расскажу тебе про то как понять что пошло не так при запуске тестов в CI контуре. Давай откроем второй экземпляр Ванессы в режиме обучения.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00000_63902996519919_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

002. Бывают ситуации когда тест упал при запуске в CI контуре, но локально проходит без ошибок.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00001_63902996526381_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

003. Для того чтобы понять почему так происходит можно применить следующую методику.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00002_63902996526756_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

004. Сначала нужно настроить, чтобы при возникновении ошибки в CI контуре происходило сохранение состояния активной формы в файл.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00007_63902996531964_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

005. Далее этот файл можно будет получить, например, из отчета Allure как показано на скриншоте.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00008_63902996532044_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

006. После этого тест нужно выполнить локально. При этом нужно поставить точку останова на том же шаге, на котором тест упал в CI контуре.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00009_63902996532328_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

007. После этого надо сохранить состояние формы клиента тестирования, полученное при локальном запуске в файл с помощью этой команды.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00016_63902996535843_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

008. После этого можно сделать сравнение этих файлов с помощью встроенного в платформу 1С механизма сравнения файлов.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00030_63902996548219_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

009. В этом окне нужно указать два ранее полученных файла состояния формы и найти расхождения.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00031_63902996551453_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

010. Так можно определить что именно пошло не так при запуске теста.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00032_63902996552768_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

011. Файлы состояний всех форм можно сравнивать аналогично.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00033_63902996552990_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)

012. На этом всё, переходи к следующему уроку интерактивной справки.

![](https://vanessa-files.do.bit-erp.ru/Doc/1.2.043.1/MD/Глава08/images/00035_63902996553590_КакПонятьЧтоПошлоНеТакПриЗапускеТестовВCIКонтуре.png)
